\chapter{\IfLanguageName{dutch}{Stand van zaken}{State of the art}}%
\label{ch:stand-van-zaken}

% Welke termen en technologiën moet iemand kennen voor het onderzoek te snappen?
In dit hoofdstuk bespreken we de verschillende technologieën die betrekking hebben op het onderzoek.
Deze literatuurstudie start met een omschrijving van het Angular-framework en hoe een Angular-project gestructureerd is.
Vervolgens overlopen we hoe dat Angular gebruikt maakt van de TypeScript-programmeertaal.
We geven een kort overzicht van de nodige veranderingen tussen Angular v16 en v20.
Ten slotte volgt een overzicht van verschillende gekende manieren om code automatisch aan te passen.

\section{Angular}
\label{ch:stand-van-zaken:angular}

% Wat is Angular?
Angular is een user interface (UI) framework ontwikkeld door Google in 2016 \autocite{Cincovic2019}.
Het is open-source onder de MIT-licentie en wordt onderhouden door een diverse groep van ontwikkelaars.
% Wat is de relatie met AngularJS?
Angular is de directe opvolger van AngularJS.
Hoewel ze dezelfde naam delen, is Angular een volledig nieuw framework met een andere architectuur.
\medskip

% Waarvoor dient het?
Angular wordt gebruikt voor het ontwikkelen van dynamische single-page webapplicaties.
De code van een Angular applicatie volgt een eenduidige structuur.
Om deze reden wordt het omschreven als een opinionated framework.
\textcite{Parker2017} definieert een framework als opinionated als het de ontwikkelaar aanstuurt om op een specifieke manier te werken.
Opinionated frameworks houden zich aan strikte conventies die dicteren hoe een project is opgesteld en geschreven.
Dit helpt de broncode van een applicatie consistent te houden.
\medskip

% Wat kan het?
Buiten UI-functies komt Angular met verschillende functionaliteiten die het ontwikkelingsproces ondersteunen \autocite{Wilken2018}.
Het komt ingebouwd met een Hyper Text Transfer Protocol (HTTP) client voor een applicatie te verbinden met een backendservice over het internet.
Hiernaast heeft Angular een collectie van Command Line Interface (CLI) tools die de ontwikkelaars helpt bij het maken van een applicatie.
Bijvoorbeeld, het genereren van een blanco component met bijhorende testen in één commando.
Tenslotte komt het met functies die toelaten om testen te schrijven voor de UI.
\medskip

% Hoe is een Angular-project gestructureerd?
Angular is gebaseerd op TypeScript en gebruikt dit in combinatie met andere technologieën:
\begin{itemize}
  \item De TypeScript-programmeertaal wordt gebruikt voor de implementatie van de bedrijfslogica en testen.
  \item HTML wordt gebruikt om de structuur van de UI te omschrijven. 
  \item CSS wordt gebruikt om de visuele representatie van de UI te omschrijven
  \item JSON wordt gebruikt voor het configureren van Angular en TypeScript.
\end{itemize}
In de volgende secties van dit hoofdstuk bespreken we de werking van Angular in meer detail.

\subsection{TypeScript}
\label{ch:stand-van-zaken:angular:typescript}

% Hoe gebruikt Angular TypeScript?
Het Angular framework gebruikt en is geschreven in TypeScript.
Als gevolg neemt TypeScript het grootste deel van een Angular applicatie in.
% Wat is TypeScript?
Zoals omschreven door \textcite{Bierman2014} is TypeScript een programmeertaal ontworpen door Microsoft in 2012.
Het is een extensie van JavaScript die een statisch typesysteem toevoegt.
Verder heeft het betere ondersteuning voor objectgeoriënteerd programmeren dan JavaScript.
TypeScript is een multiparadigma-programmeertaal.
Dit betekent dat het verschillende programmeerstijlen ondersteunt, zoals: functioneel, procedureel, objectgeoriënteerd, \dots.
\medskip

% Hoe is het anders dan JavaScript?
TypeScript code is niet uitvoerbaar.
Om een TypeScript applicatie uit te voeren, moet deze eerst gecompileerd worden.
Angular voorziet een compiler om TypeScript naar JavaScript te compileren.
Hiervoor maakt Angular achterliggend gebruik van de TypeScript compiler.
Volgens \textcite{Ramos2024} zijn twee verschillende manieren waarop een Angular applicatie gecompileerd kan worden.
Just-in-Time (JIT) en Ahead-of-Time (AOT).
JIT compileert de applicatie in de webbrowser tijdens runtime.
AOT daarentegen compileert de applicatie op voorhand en stuurt de output naar de webbrowser.
Deze studie focust op applicaties die AOT-gecompileerd zijn.
Dit is de standaardmanier van werken sinds Angular v9.
\medskip

% Hoe maakt Angular gebruik van TypeScript?
Angular gebruikt TypeScript op een objectgeoriënteerde manier.
Het is echter niet strikt objectgeoriënteerd.
Angular komt naast klassen met een collectie aan losstaande functies.
Een Angular applicatie bestaat voornamelijk uit klassen in combinatie met TypeScript decorators.
\textcite{Martins2025} omschrijft decorators als een manier om extra data te koppelen aan een klasse.
Decorators kunnen meegegeven worden aan methodes, members, properties of de klassedefinitie.
Deze functie is niet uniek aan TypeScript.
In Java noemt men dit annotaties en in C\# attributes.
Angular maakt gebruik van verschillende decorators voor verschillende doeleinden.
Welke decorators en hun werking worden in de volgende secties van dit hoofdstuk in meer detail omschreven.

\subsection{Componenten}
\label{ch:stand-van-zaken:angular:componenten}

% Welke architectuur gebruikt Angular?
Angular applicaties volgen een componentgebaseerde architectuur \autocite{AngularArchitectureDocs2025}.
Deze architectuur breekt een webpagina op in verschillende bouwblokken, genaamd componenten.
% Wat is een component?
Een component kan een klein deel van de UI vormen, zoals een knop of een invoerveld.
Of het stelt een groot deel van de UI voor, zoals een navigatiebalk of een formulier.
Eén van de belangrijkste eigenschappen van een component is dat deze andere componenten kan bevatten.
De compositie van meerdere componenten vormt uiteindelijk de webpagina die de eindgebruiker te zien krijgt.
Een component encapsuleert het uiterlijk van een UI-element samen met de achterliggende logica.
Voorbeelden van achterliggende logica zijn: valideren van input, data opvragen van een server, \dots.
\medskip

% Hoe is dit opgebouwd?
Het \textcite{AngularComponentsDocs2025} omschrijft de opbouw van een component.
Componenten zijn TypeScript-klassen met een \mintinline{ts}{@Component} decorator.
De \mintinline{ts}{@Component} decorator verwacht drie parameters.
Een \emph{selector} die de naam bepaalt van de component.
Een \emph{template} dat de structuur van de UI bepaalt.
Dit kan ofwel een verwijzing zijn naar een HTML-bestand of een hardgecodeerde string met HTML-code.
Tenslotte is er de \emph{style} parameter die het uiterlijk van de UI bepaalt.
Dit kan ofwel een verwijzing zijn naar een CSS-bestand of een hardgecodeerde string met CSS-code.
Codefragment~\ref{cf:component-declaration} geeft een voorbeeld van hoe deze syntax eruitziet.
\begin{listing}[!htb]
  \begin{minted}{ts}
    import { Component } from '@angular/core';
    
    @Component({
      selector: 'my-component',
      templateUrl: './my-component.html',
      styleUrl: './my-component.css',
    })
    export class MyComponent { ... }
  \end{minted}
  \caption[Voorbeeld Angular component]{Voorbeeld van hoe een Angular-component gedeclareerd wordt in TypeScript.}
  \label{cf:component-declaration}
\end{listing}

\subsection{Templates}
\label{ch:stand-van-zaken:angular:templates}

% Wat is een template?
Angular-componenten maken gebruik van templates om de structuur van de UI te definiëren \autocite{AngularTemplatesDocs2025}.
Templates zijn syntactisch gelijkaardig aan HTML, maar er zijn enkele verschillen.
HTML is de standaardtechnologie die webbrowsers gebruiken om de structuur van een webpagina te interpreteren.
Volgens het \textcite{AngularControlFlowDocs2025} breiden template de mogelijkheden van HTML uit met nieuwe syntax specifiek aan Angular.
Om HTML dynamischer te maken, voorziet het de \mintinline{ts}{@if}, \mintinline{ts}{@else}, \mintinline{ts}{@for} en \mintinline{ts}{@switch} syntax.
De werking is functioneel identiek aan hun TypeScript-equivalent.
Codefragment~\ref{cf:conditionele-template} geeft een voorbeeld van hoe deze syntax eruitziet.
Buiten conditionele syntax is er nieuwe syntax om data uit de component klasse te koppelen aan de template.
Dit proces noemt men data binding.
\begin{listing}[!htb]
  \begin{minted}{html}
    <h1>User profile</h1>
    @if (isAdmin()) {  
      <h2>Admin settings</h2>  
      <!-- ... -->
    } @else {  
      <h2>User settings</h2>  
      <ul>
        @for (badge of badges(); track badge.id) {    
          <li class="user-badge">{{badge.name}}</li>  
        }
      </ul>
    }
  \end{minted}
  \caption[Voorbeeld conditionele template]{Voorbeeld van conditionele syntax in Angular-templates.}
  \label{cf:conditionele-template}
\end{listing}

\subsection{Data binding}
\label{ch:stand-van-zaken:angular:data-binding}

% Hoe communiceren componenten met templates?
Angular gebruikt data binding als manier om data uit te wisselen tussen TypeScript en templates.
% Wat is data binding?
Volgens \textcite{Ozdikililer2021} is data binding een manier om een databron met een bestemming te verbinden.
In Angular vormt de TypeScript-klasse de databron, waarbij de template de bestemming is.
Conceptueel zijn er twee soorten van data binding: one-way binding en two-way binding.
One-way binding zorgt dat een verandering aan de databron gesynchroniseerd wordt met de bestemming.
Veranderingen in de bestemming daarentegen worden niet gereflecteerd in de databron.
Two-way binding synchroniseert de databron met de bestemming in beide richtingen.
Een verandering in de ene wordt gereflecteerd in de andere.
\medskip

% Hoe gebruikt Angular data binding?
Angular heeft vier verschillende soorten syntax voor data binding.
% Wat is interpolation?
De eerste noemt \emph{interpolation} \autocite{AngularDataBindingDocs2025}.
In de context van templates is interpolation een manier om dynamische tekst te tonen.
Het is one-way binding.
De tekst kan via de UI niet aangepast worden.
De syntax voor interpolation is \mintinline{ts}{{{ }}}, bijvoorbeeld:\\ \mintinline{html+ng2}{<p>Welcome {{ name }}</p>}.
\medskip

% Wat is property binding?
De tweede soort noemt \emph{property binding} \autocite{AngularDataBindingDocs2025}.
Property binding is een manier om dynamisch data aan een HTML-element of een andere component door te geven.
Het is one-way binding.
Het HTML-element of de andere component kan de data enkel lezen.
De syntax voor propery binding is \mintinline{ts}{[ ]}, bijvoorbeeld:\\ \mintinline{html+ng2}{<button [disabled]="hasErrors()">Save</button>}.
\medskip

% Wat is event binding?
De derde soort noemt \emph{event binding} \autocite{AngularEventListenersDocs2025}.
Hier is de data een referentie naar een functie.
Deze functie wordt meegegeven aan een HTML-element of component.
De bestemming van de functie roept de functie op als een bepaalde conditie bereikt is.
Deze functie wordt om deze reden een \emph{event listener} genoemd.
Het is one-way binding.
Het HTML-element of component kan de functie enkel oproepen.
De syntax voor event binding is \mintinline{ts}{( )}, bijvoorbeeld:\\ \mintinline{html+ng2}{<button (click)="saveChanges()">Save</button>}.
\medskip

% Wat is two-way binding?
De laatste soort is two-way binding \autocite{AngularTwoWayBindingDocs2025}.
Two-way binding is Angular is hetzelfde als property binding.
Met het verschil dat het HTML-element of de component nu de data kan aanpassen.
De syntax voor two-way binding is \mintinline{ts}{[( )]}, bijvoorbeeld:\\ \mintinline{html+ng2}{<input type="text" [(ngModel)]="firstName" />}.

\subsection{Services}
\label{ch:stand-van-zaken:angular:services}

% Wat zijn services?
Het \textcite{AngularDIDocs2025} omschrijft \emph{services} als herbruikbare stukken code die gedeeld kunnen worden over meerdere componenten.
Het zorgt ervoor dat verschillende componenten dezelfde logica delen.
Dit maakt een applicatie modulair en zorgt ervoor dat code herbruikbaar blijft.
\medskip

% Wat is dependency injection?
Services worden door de ontwikkelaars van de applicatie gemaakt.
Angular verbindt de services met de componenten door middel van dependency injection.
\textcite{Razina2007} omschrijft dependency injection als een ontwerppatroon om van buitenaf logica aan een object mee te geven.
Het zorgt voor een losse koppeling tussen objecten, waardoor de code modulair blijft.

\begin{listing}[!htb]
  \begin{minted}{ts}
    import { Injectable, Component, inject } from '@angular/core';

    @Injectable({ providedIn: 'root' })
    export class MyService { ... }

    @Component({ ... })
    export class MyComponent {
      private service = inject(MyService);
    }
  \end{minted}
  \caption[Voorbeeld Angular dependency injection]{Voorbeeld van hoe een service in Angular gedeclareerd en geïnjecteerd wordt.}
  \label{cf:dependency-injection}
\end{listing}

% Hoe ziet dit eruit?
Angular injecteert services in componenten tijdens hun instantiatie.
Om Angular dit voor ons te laten doen, moeten alle services de \mintinline{ts}{@Injectable} decorator hebben.
Deze services worden geïnjecteerd in een klasse via de constructor of de \mintinline{ts}{inject()} functie.
Hoewel beide opties mogelijk zijn, wordt de \mintinline{ts}{inject()} functie als de standaardmanier beschouwd sinds Angular v18.
Codefragment~\ref{cf:dependency-injection} geeft een voorbeeld van hoe dit eruit ziet.

\subsection{Testen}
\label{ch:stand-van-zaken:angular:testen}

% Hoe wordt een Angular applicatie getest?
Testen spelen een belangrijke rol in het ontwikkelingsproces.
Testen, valideren en verifiëren dat een applicatie voldoet aan de eisen van de gebruiker \autocite{Jamil2016}.
Er zijn verschillende vormen van testen, elk met een ander doel.
In deze context zijn unit-testen de voornaamste.
Angular komt ingebouwd met functionaliteiten om unit-testen te schrijven voor componenten.
% Wat zijn unit-testen?
\textcite{Olan2003} omschrijft unit-testen als een manier om een \emph{unit} in isolatie te testen.
In objectgeoriënteerde programmeertalen is een unit vaak een klasse.
Unit-testen roepen de methodes van deze klasse automatisch één voor één aan en vergelijken de output.
In Angular worden componenten als units beschouwd.
\medskip

% Welk testing-frameworkt gebruikt Angular?
Volgens het \textcite{AngularTestingDocs2025} komt Angular met CLI-tools om automatisch unit-testen te genereren.
Achterliggend wordt het Jasmine-testing-framework gebruikt.
Tijdens het opzetten van een Angular-project wordt Jasmine automatisch geconfigureerd.
Het is echter mogelijk om een ander testing-framework te gebruiken.
Dit onderzoek gaat uit dat het Jasmine-testing-framework gebruikt wordt sinds dit de standaard is.
\medskip

% Wat maakt Angular testen speciaal?
Angular voorziet in speciale functies om unit-testen te schrijven voor componenten.
Deze functies maken het mogelijk om meer dan alleen TypeScript-klassen te testen.
Ze bootsen de werking van de applicatie in een webbrowser na.
Het laat toe om templates en de data bindings te testen door interacties met de UI te simuleren.

\subsection{Versies}
\label{ch:stand-van-zaken:angular:versies}

Volgens het \textcite{AngularReleasesDocs2025} streeft Angular ernaar een leading-edge en stabiel framework te zijn.
Het framework evolueert continu en probeert up-to-date te blijven met de rest van het webecosysteem.
Om dit doel te bereiken krijgt Angular om de 6 maanden een nieuwe \emph{major} versie.
\medskip

Angular-versies worden omschreven in drie delen: \emph{major}, \emph{minor} en \emph{patch} \autocite{AngularReleasesDocs2025}.
Patches zijn bugfixes aan de achterliggende werking van Angular.
Bij deze updates is er geen tussenkomst van de ontwikkelaar nodig.
Minor updates voegen nieuwe \emph{kleine} functionaliteiten toe.
Hierbij is het de ontwikkelaar die beslist of deze functionaliteiten toegepast worden in zijn of haar applicaties.
Tenslotte zijn er de major updates.
Major updates voegen nieuwe \emph{grote} functionaliteiten toe.
Deze updates verwachten in de meeste gevallen extra input.
Dit komt in de vorm van code refactoren, extra testen uitvoeren, nieuwe API's leren, \dots.
\medskip

Dit onderzoek focust op de major updates.
Alle verwijzingen naar Angular versies verwijzen naar de major updates.

\subsection{Aanpassingen tussen v16 en v20}
\label{ch:stand-van-zaken:angular:aanpassingen-tussen-v16-en-v20}

Om een Angular-applicatie te updaten, voorziet het \textcite{AngularUpdateGuide2025} een handleiding om het proces te ondersteunen.
Deze handleiding focust exclusief op aanpassingen die een ontwikkelaar \emph{moet} uitvoeren op zijn applicaties.
Het gaat hier vooral over het vervangen van verouderde of verwijderde functies.
Enkel de noodzakelijke aanpassingen zijn hier opgelijst.
De aanpassingen die we onderzoeken zijn hierdoor gebaseerd op deze handleiding.
\medskip

Hieruit formuleren we het volgende antwoord op de deelvraag: welke veranderingen moeten uitgevoerd worden om Angular van v16 naar v20 te updaten?
Om een applicatie van v16 naar v20 te updaten, zijn volgens deze handleiding 80 verschillende stappen nodig.
Hieronder volgt een kleine opsomming van deze stappen:
\begin{itemize}
  \item Bij elke nieuwe versie verwacht Angular dat de laatste nieuwe versie van Node.js aanwezig is.
  \item Bij elke nieuwe versie verwacht Angular dat de applicatie de laatste nieuwe versie van TypeScript gebruikt.
  \item Bij elke nieuwe versie moet een commando uitgevoerd worden om de Angular \emph{core}- en \emph{cli}-afhankelijkheden te updaten.
  \item Verschillende functies veranderen van naam.
  \item Verschillende functies worden vervangen door andere functies.
  \item Verschillende functies worden verwijderd, omdat Angular nieuwe functionaliteiten als standaard toepast.
  \item Verschillende functies moeten uit andere bestanden geïmporteerd worden.
  \item Verschillende functies geven nieuwe objecten terug.
  \item Verschillende functies krijgen nieuwe of andere parameters.
  \item Door een verandering aan de achterliggende werking van het testing-framework moeten testen die bepaalde functies aanspreken herzien worden.
  \item In v17 worden condities in templates strikter geëvalueerd. De werking moet overal nagegaan worden.
  \item In v18 is er een aanpassing aan de werking van two-way binding in bepaalde randgevallen.
  \item In v18 verandert de manier waarop Angular-applicaties van pagina veranderen.
  \item In v19 en v20 is er een aanpassing aan de werking van interpolation in bepaalde randgevallen.
  \item \dots
\end{itemize}

\subsection{Waarom updaten?}
\label{ch:stand-van-zaken:waarom-updaten}

Angular-versies zijn tijdsgebonden en komen uit om de 6 maanden \autocite{AngularReleasesDocs2025}.
Versies zijn niet gebonden aan het aantal of de samenhorendheid van de aanpassingen, zoals bij andere frameworks het geval is.
De aanpassingen per versie hebben effect op verschillende aspecten van het framework.
Een nieuwe versie kan komen met veranderingen aan bijvoorbeeld: testen, CLI-tools, template-syntax, animations, \dots.
Het kan ook een aanpassing zijn aan de dependencies van Angular, zoals ondersteuning voor een nieuwere versie van TypeScript.
\medskip

Niet alle aanpassingen aan Angular zijn zichtbaar in onze code.
Dit zijn bijvoorbeeld security- of performantie-updates.
Zoals eerder vermeld vallen deze aanpassingen niet onder major updates, maar onder minor updates of patches.
Hier is het belangrijk om te vermelden dat sommige functionaliteiten niet meer ondersteund worden bij een nieuwe major update.
Deze functies worden verwijderd uit het framework op het moment dat een stabiele vervanging beschikbaar is.
Het is belangrijk om op termijn naar de nieuwe functies over te schakelen, omdat deze security-updates blijven krijgen.
\medskip

Oudere versies van Angular worden niet meer onderhouden.
Tijdens het schrijven van dit onderzoek worden v2 tot en met v17 niet verder ondersteund \autocite{AngularReleasesDocs2025}.
Om de betrouwbaarheid van onze applicatie te kunnen garanderen is dus van belang om tijdig over te schakelen naar de nieuwste versie.

\section{Automatisch refactoren}
\label{ch:stand-van-zaken:refactoring}

In dit hoofdstuk zoeken we een antwoord op de deelvraag: welke manieren bestaan er om code automatisch aan te passen zonder ongewenste veranderingen uit te voeren?
Voor dat we hierop kunnen antwoorden, moeten we eerst het concept van \emph{code aanpassen} beter definiëren.
In deze context spreken we over refactoren.
\medskip

% Wat is refactoren?
Refactoren, zoals omschreven door \textcite{Kaur2016}, is het proces om de broncode van een applicatie aan te passen zonder de functie te veranderen.
Het doel van refactoren is om de interne structuur van een applicatie te verbeteren.
% Wat betekend dit voor deze casus?
Concreet betekent \emph{verbeteren} voor deze casus dat de applicatie up-to-date is en de conventies blijft volgen van de laatste nieuwe versie van Angular.
\medskip

% Welke manieren bestaan er?
De studie door \textcite{Hodovychenko2025} vergelijkt verschillende gekende manieren om het refactoringproces te automatiseren.
In hun studie worden de manieren onderverdeeld in de volgende categorieën:
\begin{itemize}
  \item Toolgebaseerd: manuele of semi-automatische technieken ingebouwd in Integrated Development Environments (IDE's).
  \item Algorithmisch: regel-, patroon- of graaf-gebaseerde algoritmen.
  \item AI-gebaseerd: machine- of deep learning-modellen.
\end{itemize}
De volgende secties van het onderzoek geven concrete voorbeelden voor elke categorie.
Per voorbeeld worden inzichten gegeven in de werking, samen met de voor- en nadelen.
Achteraf wordt de beslissing genomen over welke manier het meest geschikt is om toe te passen in deze casus.

\subsection{Gekende problemen}
\label{ch:stand-van-zaken:refactoring:known-problems}

% Wat zijn de gekende problemen bij refactoren?
Een applicatie refactoren is niet zonder risico's.
Bij het aanpassen van software bestaat altijd het risico dat er nieuwe bugs ontstaan.
Het is niet altijd even evident om dit op te sporen.
Indien een applicatie over voldoende testen beschikt, kunnen bugs snel opgespoord worden.
Dan nog is het een meerwaarde om deze bugs op voorhand te vermijden.
\medskip

De studie door \textcite{Di2020} onderzoekt de kans dat een bepaalde refactoringactie een nieuwe bug introduceert in objectgeoriënteerde applicaties.
Uit deze studie blijkt dat acties zoals een methode of variabele van naam of type veranderen de meeste kans hebben om nieuwe bugs te introduceren.
Volgens dezelfde bron zijn dit de acties die het meeste voorkomen tijdens refactoring.
Extra attentie is nodig bij het automatiseren van deze acties.
Dit beantwoordt onze deelvraag: wat zijn statistisch gezien de meest voorkomende problemen bij het updaten van code?

\subsection{Syntax vs semantiek}
\label{ch:stand-van-zaken:refactoring:syntax-vs-semantiek}

Voordat we de verschillende refactoringtechnieken bespreken, is het belangrijk om het verschil tussen syntax en semantiek te begrijpen.
\textcite{Schmidt1996} omschrijft syntax als het uiterlijk van de programmeertaal.
Het bepaalt de structuur en volgorde van verklaringen.
Semantiek daarentegen omschrijft de betekenis achter deze structuur.
Het bepaalt wat het doel is van een stuk code.
\medskip

Beide concepten zijn belangrijk in het begrijpen van hoe een applicatie werkt, en of deze \emph{correct} werkt.
Als gevolg is het belangrijk om de automatisatietechnieken hierop af te toetsen.

\subsection{Zoek \& vervang}
\label{ch:stand-van-zaken:refactoring:find-and-replace}

% Waarom is dit relevant?
Eén van de simpelste vormen van toolgebaseerd refactoren is de zoek- en vervangfunctie.
Zoals de naam het zegt, zoekt dit naar instanties van een bepaalde sequentie van karakters in een tekst om deze vervolgens te vervangen.
\medskip

% Wat is find & replace?
De simpelste vorm zoekt op basis van een woord of een vaste sequentie van karakters.
Meer complexe implementaties maken gebruik van reguliere expressies (regex).
% Hoe werkt dit?
Regex, als omschreven door \textcite{Goyvaerts2006}, is een speciale sequentie van karakters die een zoekpatroon omschrijft.
Het laat toe om naar complexe patronen in een tekst te zoeken.

% Wat zijn de voordelen?
Zoek- en vervangfuncties hebben meerdere voordelen.
Het is goed gekend en gedocumenteerd.
Deze functies worden in veel applicaties gebruikt, zoals webbrowsers, tekstverwerkers, IDE's, \dots.
En de meeste programmeertalen komen met functies om dit te implementeren, zowel tekst- als regex-gebaseerd.
\medskip

% Wat zijn de nadelen?
Zoek- en vervangfuncties gebruiken op code is niet zonder nadelen.
Omdat het enkel zoekt op tekst, heeft het geen vat op de syntax of de semantiek van de programmeertaal.
% Wat heeft dit te maken met de nadelen?
Hierdoor is het mogelijk om ongewenste aanpassingen uit te voeren op de broncode.
Bijvoorbeeld: stel dat er twee klassen zijn met de naam \emph{A} en \emph{B}, en dat beide een methode \emph{foo} bevatten.
Als we alle instanties van de methode \emph{foo} in klasse \emph{A} willen veranderen naar \emph{bar} met behulp van zoek- en vervangfuncties, zullen alle instanties van \emph{foo} in klasse \emph{B} ook vervangen worden.
\medskip

% Zijn er nog nadelen?
Hoewel het theoretisch mogelijk zou zijn om een reguliere expressie te schrijven die met deze specifieke syntax rekening houdt, zijn hier verschillende praktische problemen mee.
Uit de studie door \textcite{Michael2019} blijkt dat regexes moeilijk leesbaar, vindbaar, valideerbaar en documenteerbaar zijn.

\subsection{Language server}
\label{ch:stand-van-zaken:refactoring:lsp}

% Wat is een LSP?
Het Language Server Protocol (LSP) is een open protocol ontwikkeld door Microsoft voor Visual Studio Code.
Code editors en IDE's gebruiken LSP's om te communiceren met een language server \autocite{Bork2023}.
Een language server is een programma dat programmeertaalspecifieke functionaliteiten aanbiedt.
Dit kan in de vorm van het automatisch aanvullen van code, code-diagnostiek, code-navigatie, \dots.
% Waarom is dit relevant?
Sinds de ontwikkeling van het LSP is het de facto standaard geworden om deze functies te implementeren in code-editors en IDE's.
\medskip

% Wat is het LSP gebaseerd refactoren?
Voor dit onderzoek zijn de TypeScript en Angular language servers relevant.
% Wat kan de TypeScript LSP?
Volgens de \textcite{TypeScriptLS2025} biedt de TypeScript language server functies aan die broncode aanpassen.
Het kan ongebruikte variabelen verwijderen, imports organiseren, ongebruikte imports verwijderen, \dots.
% Wat kan de Angular LSP?
De Angular language server focust volgens de \textcite{AngularLS2025} op automatisch aanvullen en diagnostiek voor template syntax.
\medskip

% Wat zijn de voordelen?
Het voordeel van language servers is dat ze vat hebben op de specifieke syntax van de programmeertaal.
In combinatie met een zoek- en vervangfunctie kunnen we gericht code aanpassen.
En omdat language servers komen met code-diagnostiek, is het mogelijk om na een verandering direct fouten in de syntax op te sporen.
\medskip

% Wat zijn de nadelen?
Language servers zijn echter niet perfect.
Ze hebben vat op de syntax, maar niet op de semantiek van de applicatie.
Verder zijn we gelimiteerd aan de functies van de language server.
Hoewel het mogelijk is om hun functies uit te breiden, is dit in de praktijk niet evident.
Het is een zeer niche domein, ondanks dat het de facto standaard is in code-editors en IDE's.
Een grondige kennis van het LSP is nodig om een language server aan te spreken of uit te breiden.

\subsection{Compiler}
\label{ch:stand-van-zaken:refactoring:compiler}

% Wat is compiler-gebaseerd refactoren?
De studie door \textcite{Wright2013} presenteert een tool voor het refactoren van grote C++ broncodes bij Google.
% Hoe werkt dit?
Deze tool maakt gebruik van de Clang C++ compiler om broncode om te zetten naar een Abstract Syntax Tree (AST) om zo de code te doorlopen.
Een AST, als omschreven door \textcite{Sun2023}, is een datastructuur die de structuur en syntax van een stuk code weergeeft.
Dezelfde bron noemt ATS's een fundamentele eigenschap van code.
Om deze reden wordt deze datastructuur vaak gebruikt om codegerelateerde problemen op te lossen.
Figuur \ref{fig:ast-preview} geeft een vereenvoudigde representatie van hoe een AST van een stuk TypeScript code eruit ziet.

\begin{figure}
  \centering
  \includegraphics[width=0.8\textwidth]{simple_ast_preview.png}
  \caption[Vereenvoudigde AST]{\label{fig:ast-preview}Voorbeeld van een vereenvoudigde AST-representatie (rechts) van een stuk TypeScript-code (links).}
\end{figure}

% Waarom is dit relevant?
Herinner dat Angular gebaseerd is op TypeScript en dat TypeScript gecompileerd moet worden.
De TypeScript compiler kan programmatisch aangesproken worden met de TypeScript compiler API.
Een studie door \textcite{Reid2023} gebruikt deze API voor het opsporen van foutieve code-elementen, met positieve resultaten.
\medskip

% Wat zijn de voordelen?
Net zoals LSP's heeft de compiler vat op de syntax van de programmeertaal.
Op het vlak van correctheid is dit één van de meest betrouwbare opties.
Verder is de werking van AST's goed gedocumenteerd.
Tenslotte bestaan er voor TypeScript verschillende packages die helpen met het opstellen en doorlopen van een AST.
\medskip

% Wat zijn de nadelen?
Maar net zoals LSP's heeft de compiler geen vat op de semantiek van de applicatie.
Verder is er kennis van boomstructuren en de nuances van de syntax vereist om te kunnen werken met een AST.

\subsection{Artificiële intelligentie}
\label{ch:stand-van-zaken:refactoring:ai}

% Waarom is dit relevant?
Met de recente opkomst in populariteit van artificiële intelligentie (AI) zijn reeds verschillende tools ontwikkeld om deze technologie in te zetten voor het schrijven van code.
% Wat zijn de voordelen?
Een studie door \textcite{Poluai2025} gebruikt AI om automatisch code te refactoren om de performantie van een applicatie te verbeteren.
Het toont aan dat deze AI-tools vat hebben op zowel de syntax als de semantiek van een applicatie.
Uit dezelfde studie blijkt dat het automatisatieproces correct was in 98\% van de gevallen.
\medskip

% Wat zijn de nadelen?
AI-gebaseerd refactoren is veelbelovend, maar niet perfect.
De studie door \textcite{Hodovychenko2025} identificeert enkele praktische problemen met deze aanpak.
Om dit soort AI-tools te ontwikkelen, is een grote hoeveelheid betrouwbare data nodig.
Het verzamelen en verifiëren van deze data is niet altijd praktisch haalbaar.
Refactoringdata voor oude update verzamelen is mogelijk.
Maar bij gloednieuwe updates is er nog geen data.
Tenslotte is er geen garantie op de correctheid van de output.
Een ongewenste aanpassing kan grote gevolgen hebben op de integriteit van de applicatie.

% \begin{figure}
%   \centering
%   \includegraphics[width=0.8\textwidth]{grail.jpg}
%   \caption[Voorbeeld figuur.]{\label{fig:grail}Voorbeeld van invoegen van een figuur. Zorg altijd voor een uitgebreid bijschrift dat de figuur volledig beschrijft zonder in de tekst te moeten gaan zoeken. Vergeet ook je bronvermelding niet!}
% \end{figure}
% 
% \begin{listing}
%   \begin{minted}{python}
%     import pandas as pd
%     import seaborn as sns
% 
%     penguins = sns.load_dataset('penguins')
%     sns.relplot(data=penguins, x="flipper_length_mm", y="bill_length_mm", hue="species")
%   \end{minted}
%   \caption[Voorbeeld codefragment]{Voorbeeld van het invoegen van een codefragment.}
% \end{listing}
% 
% \lipsum[7-20]
% 
% \begin{table}
%   \centering
%   \begin{tabular}{lcr}
%     \toprule
%     \textbf{Kolom 1} & \textbf{Kolom 2} & \textbf{Kolom 3} \\
%     $\alpha$         & $\beta$          & $\gamma$         \\
%     \midrule
%     A                & 10.230           & a                \\
%     B                & 45.678           & b                \\
%     C                & 99.987           & c                \\
%     \bottomrule
%   \end{tabular}
%   \caption[Voorbeeld tabel]{\label{tab:example}Voorbeeld van een tabel.}
% \end{table}

